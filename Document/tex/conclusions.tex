\chapter{Conclusions and Outlook \label{ch:conclusions}}
%\addcontentsline{toc}{chapter}{Conclusions and Outlook}
\section{Conclusions}
The main objective of this thesis was to design and implement algorithms for control and estimation of flight dynamics executed in a smartphone for the quadrotor of the Industrial Control Research Group of the Universidad del Valle.
\\\\
In the first stage of this thesis the motivation and objectives of this project were defined. A literature review was conducted in order to analyze the recent developments regarding the control of quadrotors and the use of smartphones in control systems. Also, the main commercially used quadrotor flight modes were described.
\\\\
The dynamic model of the quadrotor was derived using both the Newton-Euler and Euler-Lagrange approaches. The model inputs are also derived depending on the quadrotor geometry configuration, `+' or `X', which were described. The dynamic model was linearized about an equilibrium state and input, using the Jacobian linearization.
\\\\
After knowing the dynamic model of the quadrotor, the smartphone-based quadrotor, was detailed. This experimental platform is composed by a smartphone, motors, electronic speed controllers, an Arduino Mega ADK, a battery, and a carbon fiber frame. The smartphone is the only computational tool in the quadrotor which executes the control, sensing and estimation algorithms. Some additional components were designed and 3D-printed in order to support and protect the smartphone and the Arduino Mega ADK. Additionally, the quadrotor parameters, including mass, moments of inertia, and motors dynamics, were identifies experimentally.
\\\\
Two types of controllers were designed aiming to have reference tracking capabilities in the smartphone-based quadrotor: a linear quadratic regulator with integral feedback (LQI), and a $H_\infty$ controller. In order to have available estimations of all the components of the quadrotor state vector, a Kalman filter was designed. This Kalman filter was restricted to operate near the quadrotor equilibrium point, as it is based on the linearized quadrotor dynamic model. The simulation of these controllers, executed with the non-linear model of the quadrotor, showed the feasibility of its subsequent implementation in the real prototype.
\\\\
Finally, the implementation phase included the development of an Android application that executes all the flight control system in the smartphone on board the quadrotor. Also, a desktop application for monitoring and configuring the quadrotor was developed. This desktop application is the software component of the ground control station. Between the ground control station and the smartphone-based quadrotor, a packet-based wireless communication based on the TCP/IP protocols was established. The behaviour of the smartphone-based quadrotor being controlled by the designed control strategies was evaluated through flight tests. In these tests, both the $H_\infty$ and LQI controllers showed the ability to track a reference and keep the quadrotor stabilized. The $H_\infty$ controller showed a slightly better performance than the LQI controllers in terms of error, overshoot and setting time.


\section{Outlook}
The work done within the framework of this project, shows that it is possible for a smartphone to execute static and dynamic controllers, as well as state estimation algorithms. Therefore, the smartphone is able to serve as flight controller for a quadrotor and numerous options for future work can be discussed.
\\\\
There are several aspects which can be improved to obtain better results. The state estimation, for instance, is a fundamental pillar in the proper performance of the implemented control system. This estimation can be improved using an Extended Kalman filter (EKF), which is a Kalman filter based on the non-linear dynamics of the system. Another approach for state estimation in aircraft systems is the GNSS/INS integration, were a Kalman filter based on the error dynamics is used. Taking advantage of the availability of the camera present in the smartphone, it is also possible to add estimation strategies that include visual odometry as a data source.
\\\\
The control algorithms can be improved aiming to use robust controllers or non-linear controllers such as the linear parameter-varying control strategies. Also, the addition of the neglected quadrotor dynamics, as the propellers drag force and the ground effect, would improve the performance of the control system.
\\\\
With the work developed in this thesis, it will be possible to implement a swarm of quadrotors based on smartphones, which could be used for research about multi-agent systems.